封装了tc和netem工具，方便网络异常测试。

autotc.sh
===================================
流控工具，实现延迟、丢包、限制带宽功能。


### 参数：
-i  网卡列表。`-i eth0`, 多个网卡使用引号，如`-i "eth0 eth1"`。该选项缺省值为ifconfig列出的网卡
-d  延迟时间。`-d 100ms`,使用单位s/ms/us。该选项缺省值为0ms
-l  丢包率。`-l 50%`。 该选项缺省值为0%
-b  带宽上限。`-b 100kbps`，使用单位bps/kbps/mbps。该选项缺省值为200mbps
过滤表达式，必填。一个或多个key-value对形式，支持and和or连接,缺省为and。如`src 127.0.0.1 and dport 8080` 。 合法key：src(源地址) dst(目的地址) sport(源端口) dport(目的端口)。


### 使用示例：
`./autotc.sh -i eth0  -d 3000ms  sport 7001 dst 172.17.3.111`  使7001端口发出的, 目的是172.17.3.111的数据包延迟3000ms，作用于网卡eth0。
`./autotc.sh -i "eth1 lo" -l 50%  sport 7001 or sport 7002 or sport 7003 or sport 7004`   使4个端口发出的，任意目的地的数据包都丢包50%，作用于网卡eth1和lo。
`./autptc.sh -b 1kbps src 127.0.0.1  dport 3306` 使本地到任意服务器3306端口的连接网络带宽降低到1kbps，模拟网络拥堵，作用于所有网卡。


clean.sh
===================================
tc流控规则清理工具, 删除指定网卡上添加的所有规则。如网卡未设置规则，删除可能报错"RTNETLINK answers: No such file or directory"，忽略即可

### 参数：
-i  网卡列表。`-i eth0`, 多个网卡使用引号，如`-i "eth0 eth1"`。该选项缺省值为ifconfig列出的网卡

### 使用示例：
`./clean.sh`  删除所有网卡的规则
`./clean.sh -i eth1`  删除eth1上的规则


注意事项
===================================
1、请先开通当前账号tc命令的sudo执行权限。
2、请确认没有其他人（如sa）在机器上设置过规则，必要时联系sa，以防误删。
3、请注意过滤规则的作用范围！ 如./autotc.sh -l 100% src 127.0.0.1 将切断该机器与外部的一切联系，包括ssh的1046端口，只能通过机房重启机器恢复。建议过滤条件都带上端口。
4、确认访问某个ip是走内网还是外网的网卡，正确选择网卡，以免规则不生效，如不清楚，可以使用缺省值（推荐）。
5、tc命令只对从本机发出的数据包有流控作用，因此构造过滤表达式时，注意数据包流动方向。